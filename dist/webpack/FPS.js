!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ADDITIONAL_INFO_REQUEST=e.ADDITIONAL_INFO_PURPOSE=e.ADDITIONAL_INFO_TERMINAL=e.ADDITIONAL_INFO_CUSTOMER=e.ADDITIONAL_INFO_REFERENCE=e.ADDITIONAL_INFO_LOYALTY=e.ADDITIONAL_INFO_STORE=e.ADDITIONAL_INFO_MOBILE=e.ADDITIONAL_INFO_BILL=e.MERCHANT_INFO_CITY=e.MERCHANT_INFO_NAME=e.MERCHANT_INFO_LANGUAGE=e.MERCHANT_ACCOUNT_IDENTIFIER_EMAIL=e.MERCHANT_ACCOUNT_IDENTIFIER_MOBILE=e.MERCHANT_ACCOUNT_IDENTIFIER_FPS=e.MERCHANT_ACCOUNT_PARTICIPANT=e.MERCHANT_ACCOUNT_UNIQUE=e.DYNAMIC_QR_CODE=e.STATIC_QR_CODE=e.LOCALIZE_MERCHANT=e.CYCLIC_REDUNDANCY_CHECK=e.ADDITIONAL_INFORMATION=e.POSTAL_CODE=e.MERCHANT_CITY=e.MERCHANT_NAME=e.COUNTRY_CODE=e.CONVENIENCE_FEE_PERCENT=e.CONVENIENCE_FEE_FIXED=e.CONVENIENCE_FEE_INDICATOR=e.TRANSACTION_AMOUNT=e.TRANSACTION_CURRENCY=e.MERCHANT_CATEGORY_CODE=e.INITIATION_POINT=e.FORMAT_INDICATOR=void 0,e.FORMAT_INDICATOR="00",e.INITIATION_POINT="01",e.MERCHANT_CATEGORY_CODE="52",e.TRANSACTION_CURRENCY="53",e.TRANSACTION_AMOUNT="54",e.CONVENIENCE_FEE_INDICATOR="55",e.CONVENIENCE_FEE_FIXED="56",e.CONVENIENCE_FEE_PERCENT="57",e.COUNTRY_CODE="58",e.MERCHANT_NAME="59",e.MERCHANT_CITY="60",e.POSTAL_CODE="61",e.ADDITIONAL_INFORMATION="62",e.CYCLIC_REDUNDANCY_CHECK="63",e.LOCALIZE_MERCHANT="64",e.STATIC_QR_CODE="11",e.DYNAMIC_QR_CODE="12",e.MERCHANT_ACCOUNT_UNIQUE="00",e.MERCHANT_ACCOUNT_PARTICIPANT="01",e.MERCHANT_ACCOUNT_IDENTIFIER_FPS="02",e.MERCHANT_ACCOUNT_IDENTIFIER_MOBILE="03",e.MERCHANT_ACCOUNT_IDENTIFIER_EMAIL="04",e.MERCHANT_INFO_LANGUAGE="00",e.MERCHANT_INFO_NAME="01",e.MERCHANT_INFO_CITY="02",e.ADDITIONAL_INFO_BILL="01",e.ADDITIONAL_INFO_MOBILE="02",e.ADDITIONAL_INFO_STORE="03",e.ADDITIONAL_INFO_LOYALTY="04",e.ADDITIONAL_INFO_REFERENCE="05",e.ADDITIONAL_INFO_CUSTOMER="06",e.ADDITIONAL_INFO_TERMINAL="07",e.ADDITIONAL_INFO_PURPOSE="08",e.ADDITIONAL_INFO_REQUEST="09"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=!1;e.default=class{constructor(){this.error=!1,this.data="Success"}static Silent(){i=!0}isError(){return this.error}setError(t="",e=!1){if(this.error=!0,this.message=t,delete this.data,!e&&!i)throw this.message}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];e.default=function(t){let e,n,r,a=65535;for(n=0;n<t.length;n++){if(r=t.charCodeAt(n),r>255)throw new RangeError;e=255&(r^a>>8),a=i[e]^a<<8}return(65535&(0^a)).toString(16).toUpperCase()}},function(t,e,n){"use strict";function i(t){let e=t.slice(0,2),n=/\d\d/;if(n.test(e)&&(t=t.slice(2),n.test(t.slice(0,2)))){let n=parseInt(t.slice(0,2));if(n>0&&t.length-2>=n){return{id:e,content:(t=t.slice(2)).slice(0,n),remain:t.slice(n)}}}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.extract=e.extractContent=e.numberToValidId=e.isAlphanumericSpecial=void 0,e.isAlphanumericSpecial=function(t){return/^[A-z0-9.@_+-]+$/.test(t)},e.numberToValidId=function(t){return(t<0||t>99)&&(t=0),("00"+t).slice(-2)},e.extractContent=i,e.extract=function t(e){let n,r={};for(;n=i(e);){e=n.remain;let i=t(n.content);2==i.length?r[n.id]=n.content:r[n.id]=i[0]}return 0==e.length?[r]:[r,{"00":e}]}},,,,,,,,,function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(1)),a=i(n(2)),o=n(3),N=n(13),I=n(0),A=n(0);class C{constructor(){this.formatIndicator="01",this.initiationPoint="11",this.merchantAccount="26",this.merchantAccountInfo={uniqueIdentifier:"hk.com.hkicl"},this.merchantCategory="0000",this.transactionCurrency="HKD",this.countryCode="HK",this.merchantName="NA",this.merchantCity="HK"}static Silent(){r.default.Silent()}payload(t,e=""){return`${t}${o.numberToValidId(e.length)}${e}`}setAlphanumericSpecial(t,e){let n=new r.default;return void 0===t?n.setError("Not Specified",!0):t.length>e?n.setError(`Length Exceeds Limit (>${e})`,!0):o.isAlphanumericSpecial(t)||n.setError("Should Contains Certain Characters Only (A-z0-9.@_+-)",!0),n}setNumeric(t,e=!1,n=13){let i,a=new r.default;return void 0===t?a.setError("Not Specified",!0):i="string"==typeof t?t:"number"==typeof e?t.toFixed(e):t.toString(),a.isError()||(/^[0-9.]+$/.test(i)?parseFloat(i)<=0?a.setError("Exceeds Limit (<=0)",!0):i.length>n?a.setError(`Length Exceeds Limit (>${n}) (Including "." Character)`,!0):a.data=i:a.setError("Should Contains Certain Characters Only (0-9.)",!0)),a}parse(t){let e=this.extract(t);if(e.isError())return e;let n=JSON.parse(JSON.stringify(e.data));for(let t in n){if(e.isError())continue;let i=n[t];if(t==I.FORMAT_INDICATOR);else if(t==I.INITIATION_POINT)i==A.STATIC_QR_CODE||i==A.DYNAMIC_QR_CODE?this.initiationPoint=i:e.setError(`Invalid Initiation Point (id=${t})`);else if(t==I.TRANSACTION_CURRENCY){let n=Object.keys(N.CURRENCY).filter(t=>N.CURRENCY[t]==i);n.length>0?this.setCurrency(n[0]):e.setError(`Invalid Transaction Currency (id=${t})`)}else t==I.TRANSACTION_AMOUNT?this.setAmount(i):t==I.MERCHANT_NAME?this.merchantName=i:t==I.MERCHANT_CITY?this.merchantCity=i:t==I.ADDITIONAL_INFORMATION?this.setAdditionalInfo(i):t==I.CYCLIC_REDUNDANCY_CHECK||t==this.merchantAccount&&this.setMerchantAccount(i)}return e}extract(t=""){let e=new r.default;if(0==t.length){if(e=this.generate(),e.isError())return e;t=e.data,delete e.data}let n=o.extract(t);if(1==n.length){let i=n[0],r=i[I.CYCLIC_REDUNDANCY_CHECK],o=I.CYCLIC_REDUNDANCY_CHECK+"04",N=t.split(`${o}${r}`)[0]+o;r&&a.default(N)==r?e.data=i:e.setError("Invalid Input - Invalid CRC")}else e.setError("Invalid Input");return e}generate(){let t="",e=new r.default;t+=this.payload(I.FORMAT_INDICATOR,this.formatIndicator),t+=this.payload(I.INITIATION_POINT,this.initiationPoint);let n="";if(!this.merchantAccountInfo)return e.setError("Missing Merchant Account Information"),e;if(!this.merchantAccountInfo.uniqueIdentifier)return e.setError("Missing Merchant Unique Identifier"),e;if(n+=this.payload(A.MERCHANT_ACCOUNT_UNIQUE,this.merchantAccountInfo.uniqueIdentifier),this.merchantAccountInfo.paymentNetwork&&Object.keys(this.merchantAccountInfo.paymentNetwork).map(t=>{n+=this.payload(t,this.merchantAccountInfo.paymentNetwork[t])}),n.length>99)return e.setError("Merchant Account Information Length Exceeds Limit (>99)"),e;t+=this.payload(this.merchantAccount,n),t+=this.payload(I.MERCHANT_CATEGORY_CODE,this.merchantCategory),t+=this.payload(I.TRANSACTION_CURRENCY,N.CURRENCY[this.transactionCurrency]),this.transactionAmount&&parseFloat(this.transactionAmount)>0&&(t+=this.payload(I.TRANSACTION_AMOUNT,this.transactionAmount)),t+=this.payload(I.COUNTRY_CODE,this.countryCode),t+=this.payload(I.MERCHANT_NAME,this.merchantName),t+=this.payload(I.MERCHANT_CITY,this.merchantCity);let i="";return this.additionalInfo&&(this.additionalInfo.billNumber&&(i+=this.payload(A.ADDITIONAL_INFO_BILL,this.additionalInfo.billNumber)),this.additionalInfo.referenceLabel&&(i+=this.payload(A.ADDITIONAL_INFO_REFERENCE,this.additionalInfo.referenceLabel))),i.length>99?(e.setError("Additional Information Length Exceeds Limit (>99)"),e):(i.length>0&&(t+=this.payload(I.ADDITIONAL_INFORMATION,i)),this.cyclicRedundancyCheck=a.default(t+I.CYCLIC_REDUNDANCY_CHECK+"04"),t+=this.payload(I.CYCLIC_REDUNDANCY_CHECK,this.cyclicRedundancyCheck),e.data=t,e)}isStatic(){return this.initiationPoint==A.STATIC_QR_CODE}setStatic(){return this.initiationPoint=A.STATIC_QR_CODE,new r.default}setDynamic(){return this.initiationPoint=A.DYNAMIC_QR_CODE,new r.default}setMerchantAccount(t){let e=new r.default;for(let n in t)if(!e.isError())if(e=this.setAlphanumericSpecial(t[n],99),e.isError())e.setError("Data "+e.message);else{if(this.merchantAccountInfo.paymentNetwork||(this.merchantAccountInfo.paymentNetwork={}),n==A.MERCHANT_ACCOUNT_UNIQUE)continue;if(n==A.MERCHANT_ACCOUNT_PARTICIPANT){if(!(t[n]in N.PARTICIPANT)){e.setError("Invalid Merchant Code");continue}}else if(n==A.MERCHANT_ACCOUNT_IDENTIFIER_FPS){if(!/^[0-9]+$/.test(t[n])){e.setError("FPS Identifier Should Contains Numbers Only (0-9)");continue}if(t[n].length<7||t[n].length>9){e.setError("Invalid FPS Identifier Length (7-9)");continue}}else if(n==A.MERCHANT_ACCOUNT_IDENTIFIER_MOBILE){if(!/^[0-9+-]+$/.test(t[n])){e.setError("Mobile Number Should Contains Certain Characters Only (0-9+-)");continue}if(/^[0-9]{8}$/.test(t[n]))t[n]="+852-"+t[n];else if(/^852[0-9]{8}$/.test(t[n]))t[n]=`+${t[n].slice(0,3)}-${t[n].slice(3)}`;else if(!/^\+852-[0-9]{8}$/.test(t[n])){e.setError("Invalid Mobile Number");continue}}else if(n==A.MERCHANT_ACCOUNT_IDENTIFIER_EMAIL&&!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i.test(t[n])){e.setError("Invalid Email");continue}this.merchantAccountInfo.paymentNetwork[n]=t[n]}return e}getBank(t=!1){var e;let n=new r.default;return(null===(e=null==this?void 0:this.merchantAccountInfo)||void 0===e?void 0:e.paymentNetwork)&&A.MERCHANT_ACCOUNT_PARTICIPANT in this.merchantAccountInfo.paymentNetwork&&(n.data=this.merchantAccountInfo.paymentNetwork[A.MERCHANT_ACCOUNT_PARTICIPANT],t&&(n.data=N.PARTICIPANT[n.data])),n}setBank(t){let e={};return e[A.MERCHANT_ACCOUNT_PARTICIPANT]=t,this.setMerchantAccount(e)}getFPSId(){var t;let e=new r.default;return(null===(t=null==this?void 0:this.merchantAccountInfo)||void 0===t?void 0:t.paymentNetwork)&&(e.data=this.merchantAccountInfo.paymentNetwork[A.MERCHANT_ACCOUNT_IDENTIFIER_FPS]),e}setFPSId(t){let e,n={};return e="number"==typeof t?t.toString():t,n[A.MERCHANT_ACCOUNT_IDENTIFIER_FPS]=e,this.setMerchantAccount(n)}getMobile(){var t;let e=new r.default;return(null===(t=null==this?void 0:this.merchantAccountInfo)||void 0===t?void 0:t.paymentNetwork)&&(e.data=this.merchantAccountInfo.paymentNetwork[A.MERCHANT_ACCOUNT_IDENTIFIER_MOBILE]),e}setMobile(t){let e,n={};return e="number"==typeof t?t.toString():t,n[A.MERCHANT_ACCOUNT_IDENTIFIER_MOBILE]=e,this.setMerchantAccount(n)}getEmail(){var t;let e=new r.default;return(null===(t=null==this?void 0:this.merchantAccountInfo)||void 0===t?void 0:t.paymentNetwork)&&(e.data=this.merchantAccountInfo.paymentNetwork[A.MERCHANT_ACCOUNT_IDENTIFIER_EMAIL]),e}setEmail(t){let e={};return e[A.MERCHANT_ACCOUNT_IDENTIFIER_EMAIL]=t,this.setMerchantAccount(e)}getAmount(t=!1){let e=new r.default;return e.data=this.transactionAmount,t&&(e.data=parseFloat(e.data)),e}setAmount(t){let e=this.setNumeric(t);return e.isError()?e.setError("Transaction Amount "+e.message):this.transactionAmount=e.data,e}setAdditionalInfo(t){let e=new r.default;if(this.additionalInfo||(this.additionalInfo={}),A.ADDITIONAL_INFO_BILL in t){if(e=this.setAlphanumericSpecial(t[A.ADDITIONAL_INFO_BILL],25),e.isError())return e.setError("Bill Number "+e.message),e;this.additionalInfo.billNumber=t[A.ADDITIONAL_INFO_BILL],delete t[A.MERCHANT_INFO_NAME]}if(A.ADDITIONAL_INFO_REFERENCE in t){if(e=this.setAlphanumericSpecial(t[A.ADDITIONAL_INFO_REFERENCE],25),e.isError())return e.setError("Reference Label "+e.message),e;this.additionalInfo.referenceLabel=t[A.ADDITIONAL_INFO_REFERENCE],delete t[A.ADDITIONAL_INFO_REFERENCE]}for(let e in t)this.additionalInfo.extra||(this.additionalInfo.extra={}),this.additionalInfo.extra[e]=t[e];return e}getBillNumber(){var t;let e=new r.default;return(null===(t=null==this?void 0:this.additionalInfo)||void 0===t?void 0:t.billNumber)&&(e.data=this.additionalInfo.billNumber),e}setBillNumber(t){let e={};return e[A.ADDITIONAL_INFO_BILL]=t,this.setAdditionalInfo(e)}getReference(){var t;let e=new r.default;return(null===(t=null==this?void 0:this.additionalInfo)||void 0===t?void 0:t.referenceLabel)&&(e.data=this.additionalInfo.referenceLabel),e}setReference(t){let e={};return e[A.ADDITIONAL_INFO_REFERENCE]=t,this.setAdditionalInfo(e)}setHKD(){return this.setCurrency(C.CURRENCY_HKD)}setCNY(){return this.setCurrency(C.CURRENCY_CNY)}getCurrency(t=!1){let e=new r.default;return e.data=this.transactionCurrency,t&&(e.data=N.CURRENCY[e.data]),e}setCurrency(t){let e=new r.default;return t in N.CURRENCY?this.transactionCurrency=t:e.setError("Invalid Currency Code"),new r.default}}e.default=C,C.BANK_STANDARD_CHARTERED="003",C.BANK_HSBC="004",C.BANK_BANK_OF_CHINA="012",C.BANK_EAST_ASIA="015",C.BANK_DBS="016",C.BANK_HANG_SANG="024",C.BANK_CITIBANK="250",C.BANK_WECHAT="931",C.BANK_TAP_N_GO="935",C.BANK_TNG="947",C.BANK_ALIPAY="948",C.BANK_OCTOPUS="949",C.BANK_PAYME="954",C.CURRENCY_HKD="HKD",C.CURRENCY_CNY="CNY",C.CURRENCY_TWD="TWD",C.CURRENCY_USD="USD",C.FPS_EMAIL_IRD_PROFITS_TAX="FPS_Identifier_CRC201A@ird.gov.hk",C.FPS_EMAIL_IRD_SALARIES_TAX="FPS_Identifier_CRC201B@ird.gov.hk",C.FPS_EMAIL_IRD_PERSONAL_ASSESSMENT="FPS_Identifier_CRC201D@ird.gov.hk",C.FPS_ID_CLP="4853305",C.FPS_ID_HK_ELECTRIC="4853305","undefined"==typeof window||window.FPS||(window.FPS=C)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PARTICIPANT=e.MERCHANT=e.LANGUAGE=e.CURRENCY=e.COUNTRY=void 0,e.COUNTRY={CN:"cn",GB:"gb",HK:"hk",MO:"mo",TW:"tw",US:"us"},e.CURRENCY={CNY:"156",HKD:"344",TWD:"901",USD:"840"},e.LANGUAGE={EN:"en",ZH:"zh"},e.MERCHANT="26",e.PARTICIPANT={"003":"STANDARD CHARTERED BANK (HONG KONG) LIMITED","004":"The Hongkong and Shanghai Banking Corporation Limited","009":"China Construction Bank (Asia) Corporation Limited","012":"Bank of China (Hong Kong) Limited","014":"Bank of China (Hong Kong) Limited","015":"The Bank of East Asia, Limited","016":"DBS Bank (Hong Kong) Ltd.","019":"Bank of China (Hong Kong) Limited","020":"CMB Wing Lung Bank Limited","024":"Hang Seng Bank Ltd.","025":"Shanghai Commercial Bank Limited","026":"Bank of China (Hong Kong) Limited","027":"Bank of Communications Co., Ltd. Hong Kong Branch","028":"Public Bank (Hong Kong) Limited","029":"INDUSTRIAL AND COMMERCIAL BANK OF CHINA (ASIA) LIMITED","030":"Bank of China (Hong Kong) Limited","031":"Bank of China (Hong Kong) Limited","033":"Bank of China (Hong Kong) Limited","035":"OCBC Wing Hang Bank Limited","036":"Bank of China (Hong Kong) Limited","038":"Tai Yau Bank Limited","039":"Chiyu Banking Corporation Limited","040":"Dah Sing Bank, Limited","041":"Chong Hing Bank Limited","043":"Nanyang Commercial Bank, Limited","044":"OCBC Wing Hang Bank Limited","061":"TAI SANG BANK LTD.","064":"Bank of China (Hong Kong) Limited","070":"Bank of China (Hong Kong) Limited",128:"Fubon Bank (Hong Kong) Limited",250:"Citibank (Hong Kong) Limited",929:"K & R INTERNATIONAL LIMITED",930:"EPAYLINKS TECHNOLOGY CO., LIMITED",931:"WeChat Pay Hong Kong Limited",933:"33 Financial Services Limited",934:"UniCard Solution Limited",935:"HKT Payment Limited",947:"TNG (Asia) Limited",948:"Alipay Financial Services (HK) Limited",949:"Octopus Cards Limited",952:"Autotoll Limited",954:"PayMe"}}]);